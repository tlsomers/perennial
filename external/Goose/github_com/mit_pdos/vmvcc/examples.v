(* autogenerated from github.com/mit-pdos/vmvcc/examples *)
From Perennial.goose_lang Require Import prelude.
From Goose Require github_com.mit_pdos.vmvcc.txn.

From Perennial.goose_lang Require Import ffi.grove_prelude.

Definition hello: val :=
  rec: "hello" "txn" :=
    txn.Txn__Put "txn" #0 #(str"hello");;
    txn.Txn__Get "txn" #0;;
    txn.Txn__Delete "txn" #0;;
    #true.

Definition Hello: val :=
  rec: "Hello" "txno" :=
    let: "body" := (Î»: "txni",
      hello "txni"
      ) in
    txn.Txn__DoTxn "txno" "body";;
    #().

Definition CallHello: val :=
  rec: "CallHello" <> :=
    let: "db" := txn.MkTxnMgr #() in
    txn.TxnMgr__ActivateGC "db";;
    let: "txn" := txn.TxnMgr__New "db" in
    Hello "txn";;
    #().
