(* autogenerated by goose proofgen; do not modify *)
Require Export New.proof.grove_prelude.
Require Export New.generatedproof.github_com.goose_lang.std.
Require Export New.generatedproof.github_com.mit_pdos.gokv.aof.
Require Export New.generatedproof.github_com.mit_pdos.gokv.grove_ffi.
Require Export New.generatedproof.github_com.mit_pdos.gokv.vrsm.replica.
Require Export New.generatedproof.github_com.tchajed.marshal.
Require Export New.golang.theory.

Require Export New.code.github_com.mit_pdos.gokv.vrsm.storage.
Module storage.
Axiom falso : False.
Module InMemoryStateMachine.
Section def.
Context `{ffi_syntax}.
Record t := mk {
  ApplyReadonly' : func.t;
  ApplyVolatile' : func.t;
  GetState' : func.t;
  SetState' : func.t;
}.
End def.
End InMemoryStateMachine.

Section instances.
Context `{ffi_syntax}.

Global Instance settable_InMemoryStateMachine `{ffi_syntax}: Settable _ :=
  settable! InMemoryStateMachine.mk < InMemoryStateMachine.ApplyReadonly'; InMemoryStateMachine.ApplyVolatile'; InMemoryStateMachine.GetState'; InMemoryStateMachine.SetState' >.
Global Instance into_val_InMemoryStateMachine `{ffi_syntax} : IntoVal InMemoryStateMachine.t.
Admitted.

Global Instance into_val_typed_InMemoryStateMachine `{ffi_syntax} : IntoValTyped InMemoryStateMachine.t storage.InMemoryStateMachine :=
{|
  default_val := InMemoryStateMachine.mk (default_val _) (default_val _) (default_val _) (default_val _);
  to_val_has_go_type := ltac:(destruct falso);
  default_val_eq_zero_val := ltac:(destruct falso);
  to_val_inj := ltac:(destruct falso);
  to_val_eqdec := ltac:(solve_decision);
|}.
Global Instance into_val_struct_field_InMemoryStateMachine_ApplyReadonly `{ffi_syntax} : IntoValStructField "ApplyReadonly" storage.InMemoryStateMachine InMemoryStateMachine.ApplyReadonly'.
Admitted.

Global Instance into_val_struct_field_InMemoryStateMachine_ApplyVolatile `{ffi_syntax} : IntoValStructField "ApplyVolatile" storage.InMemoryStateMachine InMemoryStateMachine.ApplyVolatile'.
Admitted.

Global Instance into_val_struct_field_InMemoryStateMachine_GetState `{ffi_syntax} : IntoValStructField "GetState" storage.InMemoryStateMachine InMemoryStateMachine.GetState'.
Admitted.

Global Instance into_val_struct_field_InMemoryStateMachine_SetState `{ffi_syntax} : IntoValStructField "SetState" storage.InMemoryStateMachine InMemoryStateMachine.SetState'.
Admitted.


Context `{!ffi_model, !ffi_semantics _ _, !ffi_interp _, !heapGS Σ}.
Global Instance wp_struct_make_InMemoryStateMachine `{ffi_semantics} `{!ffi_interp ffi} `{!heapGS Σ} ApplyReadonly' ApplyVolatile' GetState' SetState':
  PureWp True
    (struct.make #storage.InMemoryStateMachine (alist_val [
      "ApplyReadonly" ::= #ApplyReadonly';
      "ApplyVolatile" ::= #ApplyVolatile';
      "GetState" ::= #GetState';
      "SetState" ::= #SetState'
    ]))%struct
    #(InMemoryStateMachine.mk ApplyReadonly' ApplyVolatile' GetState' SetState').
Admitted.


Global Instance InMemoryStateMachine_struct_fields_split dq l (v : InMemoryStateMachine.t) :
  StructFieldsSplit dq l v (
    "HApplyReadonly" ∷ l ↦s[storage.InMemoryStateMachine :: "ApplyReadonly"]{dq} v.(InMemoryStateMachine.ApplyReadonly') ∗
    "HApplyVolatile" ∷ l ↦s[storage.InMemoryStateMachine :: "ApplyVolatile"]{dq} v.(InMemoryStateMachine.ApplyVolatile') ∗
    "HGetState" ∷ l ↦s[storage.InMemoryStateMachine :: "GetState"]{dq} v.(InMemoryStateMachine.GetState') ∗
    "HSetState" ∷ l ↦s[storage.InMemoryStateMachine :: "SetState"]{dq} v.(InMemoryStateMachine.SetState')
  ).
Admitted.

End instances.
Module StateMachine.
Section def.
Context `{ffi_syntax}.
Record t := mk {
  fname' : go_string;
  logFile' : loc;
  logsize' : w64;
  sealed' : bool;
  epoch' : w64;
  nextIndex' : w64;
  smMem' : loc;
}.
End def.
End StateMachine.

Section instances.
Context `{ffi_syntax}.

Global Instance settable_StateMachine `{ffi_syntax}: Settable _ :=
  settable! StateMachine.mk < StateMachine.fname'; StateMachine.logFile'; StateMachine.logsize'; StateMachine.sealed'; StateMachine.epoch'; StateMachine.nextIndex'; StateMachine.smMem' >.
Global Instance into_val_StateMachine `{ffi_syntax} : IntoVal StateMachine.t.
Admitted.

Global Instance into_val_typed_StateMachine `{ffi_syntax} : IntoValTyped StateMachine.t storage.StateMachine :=
{|
  default_val := StateMachine.mk (default_val _) (default_val _) (default_val _) (default_val _) (default_val _) (default_val _) (default_val _);
  to_val_has_go_type := ltac:(destruct falso);
  default_val_eq_zero_val := ltac:(destruct falso);
  to_val_inj := ltac:(destruct falso);
  to_val_eqdec := ltac:(solve_decision);
|}.
Global Instance into_val_struct_field_StateMachine_fname `{ffi_syntax} : IntoValStructField "fname" storage.StateMachine StateMachine.fname'.
Admitted.

Global Instance into_val_struct_field_StateMachine_logFile `{ffi_syntax} : IntoValStructField "logFile" storage.StateMachine StateMachine.logFile'.
Admitted.

Global Instance into_val_struct_field_StateMachine_logsize `{ffi_syntax} : IntoValStructField "logsize" storage.StateMachine StateMachine.logsize'.
Admitted.

Global Instance into_val_struct_field_StateMachine_sealed `{ffi_syntax} : IntoValStructField "sealed" storage.StateMachine StateMachine.sealed'.
Admitted.

Global Instance into_val_struct_field_StateMachine_epoch `{ffi_syntax} : IntoValStructField "epoch" storage.StateMachine StateMachine.epoch'.
Admitted.

Global Instance into_val_struct_field_StateMachine_nextIndex `{ffi_syntax} : IntoValStructField "nextIndex" storage.StateMachine StateMachine.nextIndex'.
Admitted.

Global Instance into_val_struct_field_StateMachine_smMem `{ffi_syntax} : IntoValStructField "smMem" storage.StateMachine StateMachine.smMem'.
Admitted.


Context `{!ffi_model, !ffi_semantics _ _, !ffi_interp _, !heapGS Σ}.
Global Instance wp_struct_make_StateMachine `{ffi_semantics} `{!ffi_interp ffi} `{!heapGS Σ} fname' logFile' logsize' sealed' epoch' nextIndex' smMem':
  PureWp True
    (struct.make #storage.StateMachine (alist_val [
      "fname" ::= #fname';
      "logFile" ::= #logFile';
      "logsize" ::= #logsize';
      "sealed" ::= #sealed';
      "epoch" ::= #epoch';
      "nextIndex" ::= #nextIndex';
      "smMem" ::= #smMem'
    ]))%struct
    #(StateMachine.mk fname' logFile' logsize' sealed' epoch' nextIndex' smMem').
Admitted.


Global Instance StateMachine_struct_fields_split dq l (v : StateMachine.t) :
  StructFieldsSplit dq l v (
    "Hfname" ∷ l ↦s[storage.StateMachine :: "fname"]{dq} v.(StateMachine.fname') ∗
    "HlogFile" ∷ l ↦s[storage.StateMachine :: "logFile"]{dq} v.(StateMachine.logFile') ∗
    "Hlogsize" ∷ l ↦s[storage.StateMachine :: "logsize"]{dq} v.(StateMachine.logsize') ∗
    "Hsealed" ∷ l ↦s[storage.StateMachine :: "sealed"]{dq} v.(StateMachine.sealed') ∗
    "Hepoch" ∷ l ↦s[storage.StateMachine :: "epoch"]{dq} v.(StateMachine.epoch') ∗
    "HnextIndex" ∷ l ↦s[storage.StateMachine :: "nextIndex"]{dq} v.(StateMachine.nextIndex') ∗
    "HsmMem" ∷ l ↦s[storage.StateMachine :: "smMem"]{dq} v.(StateMachine.smMem')
  ).
Admitted.

End instances.

Section names.

Class GlobalAddrs :=
{
}.

Context `{!GlobalAddrs}.
Context `{!heapGS Σ}.
Context `{!goGlobalsGS Σ}.

Definition var_addrs : list (go_string * loc) := [
  ].

Global Instance is_pkg_defined_instance : IsPkgDefined storage :=
{|
  is_pkg_defined := is_global_definitions storage var_addrs;
|}.

Definition own_allocated `{!GlobalAddrs} : iProp Σ :=
True.

Global Instance wp_func_call_recoverStateMachine :
  WpFuncCall storage "recoverStateMachine" _ (is_pkg_defined storage) :=
  ltac:(apply wp_func_call'; reflexivity).

Global Instance wp_func_call_MakePbServer :
  WpFuncCall storage "MakePbServer" _ (is_pkg_defined storage) :=
  ltac:(apply wp_func_call'; reflexivity).

Global Instance wp_method_call_StateMachine'ptr_apply :
  WpMethodCall storage "StateMachine'ptr" "apply" _ (is_pkg_defined storage) :=
  ltac:(apply wp_method_call'; reflexivity).

Global Instance wp_method_call_StateMachine'ptr_applyReadonly :
  WpMethodCall storage "StateMachine'ptr" "applyReadonly" _ (is_pkg_defined storage) :=
  ltac:(apply wp_method_call'; reflexivity).

Global Instance wp_method_call_StateMachine'ptr_getStateAndSeal :
  WpMethodCall storage "StateMachine'ptr" "getStateAndSeal" _ (is_pkg_defined storage) :=
  ltac:(apply wp_method_call'; reflexivity).

Global Instance wp_method_call_StateMachine'ptr_makeDurableWithSnap :
  WpMethodCall storage "StateMachine'ptr" "makeDurableWithSnap" _ (is_pkg_defined storage) :=
  ltac:(apply wp_method_call'; reflexivity).

Global Instance wp_method_call_StateMachine'ptr_setStateAndUnseal :
  WpMethodCall storage "StateMachine'ptr" "setStateAndUnseal" _ (is_pkg_defined storage) :=
  ltac:(apply wp_method_call'; reflexivity).

Global Instance wp_method_call_StateMachine'ptr_truncateAndMakeDurable :
  WpMethodCall storage "StateMachine'ptr" "truncateAndMakeDurable" _ (is_pkg_defined storage) :=
  ltac:(apply wp_method_call'; reflexivity).

End names.
End storage.
